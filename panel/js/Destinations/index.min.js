"use strict";$(document).ready(function(){var a;$(document).find("table").DataTable({dom:"Bfrtip",buttons:[],columnDefs:[{orderable:false,targets:"_all"},{className:"text-left",targets:"_all"}],order:[],searching:true,info:true,paging:true,language:{}});$('[data-action="get"]').on("click",function(){a=$(this).data("id");$.ajax({url:"",type:"POST",data:"id="+a+"&action=get",processData:false,cache:false,dataType:"json",success:function(b){if(b.status=="success"){$('[name="name"]').val(b.data.name);$('[name="cover"]').parents(".uploader").find("[data-preview] > img").attr("src","../uploads/"+b.data.cover);$('[data-modal="datas"] header > h4').html("Detalles | Editar");$('[data-modal="datas"] main > form').attr("data-submit-action","edit");$('[data-modal="datas"]').addClass("view").animate({scrollTop:0},0)}else{if(b.status=="error"){$('[data-modal="alert"] main > p').html(b.message);$('[data-modal="alert"]').addClass("view").animate({scrollTop:0},0)}}}})});$('[data-modal="datas"]').modal().onSuccess(function(){$('form[name="datas"]').submit()});$('[data-modal="datas"]').modal().onCancel(function(){$("[data-preview] > img").attr("src","../images/empty.png");$('[data-modal="datas"] header > h4').html("Nuevo");$('[data-modal="datas"] main > form').attr("data-submit-action","new");$('[data-modal="datas"] main > form')[0].reset();$('[data-modal="datas"] main > form [name]').parents(".error").find("p.error").remove();$('[data-modal="datas"] main > form [name]').parents(".error").removeClass("error")});$('form[name="datas"]').on("submit",function(d){d.preventDefault();var b=$(this);var c=new FormData(b[0]);c.append("id",a);c.append("action",b.data("submit-action"));$.ajax({url:"",type:"POST",data:c,contentType:false,processData:false,cache:false,dataType:"json",success:function(e){checkFormValidations(b,e,function(){$('[data-modal="datas"]').removeClass("view").animate({scrollTop:0},0);$('[data-modal="success"] main > p').html(e.message);$('[data-modal="success"]').addClass("view").animate({scrollTop:0},0);setTimeout(function(){location.reload()},1000)})}})});$('[data-action="delete"]').on("click",function(){a=$(this).data("id");$('[data-modal="delete"]').addClass("view").animate({scrollTop:0},0)});$('[data-modal="delete"]').modal().onSuccess(function(){$.ajax({url:"",type:"POST",data:"id="+a+"&action=delete",processData:false,cache:false,dataType:"json",success:function(b){$('[data-modal="delete"]').removeClass("view").animate({scrollTop:0},0);if(b.status=="success"){$('[data-modal="success"] main > p').html(b.message);$('[data-modal="success"]').addClass("view").animate({scrollTop:0},0);setTimeout(function(){location.reload()},1000)}else{if(b.status=="error"){$('[data-modal="alert"] main > p').html(b.message);$('[data-modal="alert"]').addClass("view").animate({scrollTop:0},0)}}}})})});