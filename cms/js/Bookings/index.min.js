"use strict";$(document).ready(function(){var a;$(document).find("table").DataTable({dom:"Bfrtip",buttons:[],columnDefs:[{orderable:false,targets:"_all"},{className:"text-left",targets:"_all"}],order:[],searching:true,info:true,paging:true,language:{}});$('[name="time"]').on("change",function(){window.location.href="index.php?c=bookings&m=index&p="+$('[name="time"]').val()});$('[data-action="get"]').on("click",function(){a=$(this).data("id");$.ajax({url:"",type:"POST",data:"id="+a+"&action=get",processData:false,cache:false,dataType:"json",success:function(b){if(b.status=="success"){console.log(b.data);$('[name="token"]').val(b.data.token);$('[name="name"]').val(b.data.name);$('[name="email"]').val(b.data.email);$('[name="cellphone"]').val(b.data.cellphone);$('[name="tour"]').val(b.data.tour.es);$('[name="date_booking"]').val(b.data.date_booking);$('[name="paxes"]').val((b.data.paxes.adults+b.data.paxes.children)+" Paxes ("+b.data.paxes.adults+" Adultos, "+b.data.paxes.children+" NiÃ±os)");$('[name="totals_amount"]').val("$ "+b.data.totals.amount+" USD");if(b.data.totals.discount!=null){if(b.data.totals.discount.type=="$"){$('[name="totals_discount"]').val("$ "+b.data.totals.discount.amount+" USD")}else{if(b.data.totals.discount.type=="%"){$('[name="totals_discount"]').val(b.data.totals.discount.amount+"%")}}}else{$('[name="totals_discount"]').val("Sin descuento")}$('[name="payment_method"]').val(b.data.payment.method);$('[name="payment_currency"]').val(b.data.payment.currency);$('[name="language"]').val(b.data.language);$('[name="canceled"]').val(b.data.canceled);$('[name="observations"]').val(b.data.observations);$('[name="date_booked"]').val(b.data.date_booked);$('[name="airbnb"]').val(b.data.airbnb+" ("+b.data.user+")");$('[data-modal="datas"]').addClass("view").animate({scrollTop:0},0)}else{if(b.status=="error"){$('[data-modal="alert"] main > p').html(b.message);$('[data-modal="alert"]').addClass("view").animate({scrollTop:0},0)}}}})});$('[data-modal="datas"]').modal().onSuccess(function(){$('form[name="datas"]').submit()});$('[data-modal="datas"]').modal().onCancel(function(){$('[data-modal="datas"] main > form')[0].reset();$('[data-modal="datas"] main > form [name]').parents(".error").find("p.error").remove();$('[data-modal="datas"] main > form [name]').parents(".error").removeClass("error")});$('form[name="datas"]').on("submit",function(c){c.preventDefault();var b=$(this);$.ajax({url:"",type:"POST",data:b.serialize()+"&id="+a+"&action=edit",processData:false,cache:false,dataType:"json",success:function(d){checkFormValidations(b,d,function(){$('[data-modal="datas"]').removeClass("view").animate({scrollTop:0},0);$('[data-modal="success"] main > p').html(d.message);$('[data-modal="success"]').addClass("view").animate({scrollTop:0},0);setTimeout(function(){location.reload()},1000)})}})})});